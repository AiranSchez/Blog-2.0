@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Custom Properties for Design System */
:root {
  /* Colors */
  --color-carbon: #1f2421;
  --color-stormy: #216869;
  --color-seaweed: #49a078;
  --color-muted: #9cc5a1;
  --color-alabaster: #dce1de;
  
  /* Spacing scale */
  --spacing-xs: 0.5rem;
  --spacing-sm: 0.75rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  --spacing-3xl: 4rem;
  
  /* Typography */
  --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  
  /* Transitions */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  
  /* Border radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  
  /* Z-index scale */
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;
}

/* Base styles */
@layer base {
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 5rem;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    @apply text-carbon dark:text-alabaster;
    @apply bg-alabaster dark:bg-carbon;
    @apply transition-colors duration-300;
  }
  
  /* Typography improvements */
  h1, h2, h3, h4, h5, h6 {
    text-wrap: balance;
    @apply font-semibold;
  }
  
  p {
    text-wrap: pretty;
  }
  
  /* Focus states for accessibility */
  :focus-visible {
    @apply outline-none ring-2 ring-stormy ring-offset-2;
  }
  
  /* Skip to main content link */
  .skip-to-main {
    @apply absolute left-0 -top-full;
    @apply focus:top-0;
    @apply px-4 py-2 bg-stormy text-white;
    @apply z-[9999] transition-all;
  }
  
  /* Improve tap targets on mobile */
  button, a {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Better text selection */
  ::selection {
    @apply bg-stormy/20 text-carbon;
  }
  
  ::-moz-selection {
    @apply bg-stormy/20 text-carbon;
  }
  
  /* Tabular numbers for data */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }
  
  /* Proper ellipsis character */
  .loading-text::after {
    content: 'â€¦';
  }
}

/* Component utilities */
@layer components {
  /* Container with consistent padding */
  .container-custom {
    @apply container mx-auto px-4 md:px-6 lg:px-8;
  }
  
  /* Card base styles */
  .card-base {
    @apply bg-white dark:bg-carbon-700;
    @apply rounded-lg shadow-md;
    @apply border border-alabaster-200 dark:border-carbon-600;
    @apply transition-all duration-300;
  }
  
  /* Button base styles */
  .btn-base {
    @apply inline-flex items-center justify-center;
    @apply px-4 py-2 rounded-lg;
    @apply font-medium text-sm;
    @apply transition-all duration-300;
    @apply focus-visible:ring-2 focus-visible:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  /* Link styles with proper underline */
  .link-base {
    @apply underline decoration-stormy/30;
    @apply hover:decoration-stormy;
    @apply transition-colors duration-200;
  }
  
  /* Prose improvements for blog content */
  .prose-custom {
    @apply prose prose-lg;
    @apply dark:prose-invert;
    @apply prose-headings:text-carbon dark:prose-headings:text-alabaster;
    @apply prose-a:text-stormy prose-a:no-underline;
    @apply prose-a:hover:underline;
    @apply prose-code:text-seaweed dark:prose-code:text-muted;
    @apply max-w-none;
  }
}

/* Utility classes */
@layer utilities {
  /* Text truncation utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Prevent layout shift during loading */
  .prevent-cls {
    content-visibility: auto;
  }
  
  /* Safe area insets for mobile */
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Dark mode specific adjustments */
@media (prefers-color-scheme: dark) {
  html:not(.light) {
    color-scheme: dark;
  }
}

html.dark {
  color-scheme: dark;
}

/* Print styles */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  a {
    text-decoration: underline;
  }
  
  pre, blockquote {
    border: 1px solid #999;
    page-break-inside: avoid;
  }
  
  thead {
    display: table-header-group;
  }
  
  tr, img {
    page-break-inside: avoid;
  }
  
  img {
    max-width: 100% !important;
  }
  
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  
  h2, h3 {
    page-break-after: avoid;
  }
}
